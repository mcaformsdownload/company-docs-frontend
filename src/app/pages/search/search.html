<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card border-0 shadow bg-white">
        <div class="card-body p-4">
          <h2 class="mb-4 text-dark">
            <i class="bi bi-search me-2"></i>Search Company by CIN
          </h2>
          <form (ngSubmit)="searchCompany()" class="row g-3">
            <div class="col-md-8">
              <input type="text" class="form-control form-control-lg border-dark" 
                     [(ngModel)]="cin" name="cin" 
                     placeholder="Enter CIN (e.g., U72200PN2018PTC176503)" required>
            </div>
            <div class="col-md-4">
              <button type="submit" class="btn btn-dark btn-lg w-100">
                <i class="bi bi-search me-2"></i>Search
              </button>
            </div>
          </form>
          <div *ngIf="error" class="alert alert-dark mt-3">{{ error }}</div>
        </div>
      </div>

      <div class="row g-4 mt-3">
        <div *ngFor="let company of companies; let i = index" class="col-md-6 col-lg-4">
          <div class="card h-100 shadow-sm border-0 bg-white">
            <div class="card-body">
              <div class="d-flex align-items-center mb-3">
                <div class="form-check form-switch me-3">
                  <input class="form-check-input" type="checkbox" 
                         [checked]="company.selected || false"
                         (change)="toggleSelection(i)" style="transform: scale(1.3)">
                </div>
                <h5 class="card-title mb-0 text-dark">{{ company.company_name }}</h5>
              </div>
              <p class="text-muted small mb-2">CIN: {{ company.cin }}</p>
              <p class="mb-2 text-dark">Incorporation Date: <strong>{{ company.date_of_incorporation }}</strong></p>
              <div class="d-flex justify-content-between align-items-center mt-3">
                <span class="h5 text-dark mb-0">â‚¹{{ company.price | number:'1.2-2' }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="companies.length > 0" class="position-fixed bottom-0 end-0 p-4" style="z-index: 1000">
        <button (click)="buySelected()" class="btn btn-dark btn-lg shadow-lg" 
                [disabled]="selectedCount === 0">
          <i class="bi bi-cart-check me-2"></i>
          Buy Selected ({{ selectedCount }})
        </button>
      </div>
    </div>
  </div>
</div>